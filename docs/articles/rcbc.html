<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>rcbc: CBC bindings for R • rcbc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="rcbc: CBC bindings for R">
<meta property="og:description" content="rcbc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rcbc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/rcbc.html">Getting started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dirkschumacher/rcbc">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="rcbc_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>rcbc: CBC bindings for R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dirkschumacher/rcbc/blob/master/vignettes/rcbc.Rmd"><code>vignettes/rcbc.Rmd</code></a></small>
      <div class="hidden name"><code>rcbc.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The <em>rcbc</em> package provides an interface to the <a href="https://projects.coin-or.org/Cbc"><em>CBC</em> (COIN-OR branchand cut)</a> solver (Forrest &amp; Lougee-Heimer 2005). Specifically, <em>CBC</em> is an open-source mixed integer programming solver that is developed as part of the <a href="http://coin-or.org/">Computational Infrastructure for Operations Research (COIN-OR) project</a>. By interfacing with the <em>CBC</em> solver, the <em>rcbc</em> package can be used to generate optimal solutions to optimization problems. To showcase this package, we will define an optimization problem and then find an optimal solution for it.</p>
</div>
<div id="formulating-the-problem" class="section level2">
<h2 class="hasAnchor">
<a href="#formulating-the-problem" class="anchor"></a>Formulating the problem</h2>
<p>Our optimization problem is an integer programming problem (Wolsey 2020). This means that is is an optimization problem with certain characteristics that, in turn, means it can be solved by the <em>CBC</em> solver. It is formulated following:</p>
<p><span class="math display">\[
\begin{align}
\text{maximize: } &amp; x + 2 \times y + 0.5 \times z &amp; \tag{1a} \\
\text{subject to: } &amp; x + y \leq 1 &amp; \tag{1b} \\
&amp; 3 \times x + 4 \times z \geq 5 &amp; \tag{1c} \\
&amp; x + z = 8 &amp; \tag{1d} \\
&amp; x \in \{ 0, 1, 2, \dots, 10 \} &amp; \tag{1e} \\
&amp; y \in \{ 0, 1, 2, \dots, 11 \} &amp; \tag{1f} \\
&amp; z \in \{ 0, 1, 2, \dots, 13 \} &amp; \tag{1g} \\
\end{align}
\]</span></p>
<p>Here, the <span class="math inline">\(x\)</span>, <span class="math inline">\(y\)</span>, and <span class="math inline">\(z\)</span> variables are the decision variables. In other words, we don’t know what values these variables should have in an optimal solution, and so we can use mathematical optimization techniques to find this out. Our objective function is to maximize a weighted sum of the <span class="math inline">\(x\)</span>, <span class="math inline">\(y\)</span>, and <span class="math inline">\(z\)</span> variables (eqn 1a). We also have constraints that limit what values the decision variables can have (eqns 1b – 1g). A couple of our constraints specify inequalities (eqns 1b – 1c), meaning that certain combinations of variables cannot exceed (or be smaller than) certain thresholds (e.g. <span class="math inline">\(x\)</span> plus <span class="math inline">\(y\)</span> cannot exceed a value of 1). We also have an equality constraint (eqn 1d), meaning that certain combinations of variables must equal a certain value. Finally, we also have constraints (eqns 1e – 1g) that specify that the decision variables must have integer values that range between certain thresholds (e.g. <span class="math inline">\(x\)</span> must be an integer value between 0 and 10).</p>
</div>
<div id="encoding-the-problem" class="section level2">
<h2 class="hasAnchor">
<a href="#encoding-the-problem" class="anchor"></a>Encoding the problem</h2>
<p>After defining the problem formulation mathematically, we need to encode objects within our <em>R</em> session to describe this problem. We can achieve this by creating a series of <em>R</em> objects that – in tandem – work together to describe the optimization problem:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load rcbc package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dirkschumacher.github.io/rcbc">rcbc</a></span><span class="op">)</span>

<span class="co"># create vector to describe the objective function (eqn 1a)</span>
<span class="co">## each element corresponds to a decision variable,</span>
<span class="co">## and the values are the coefficients</span>
<span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span> <span class="op">=</span> <span class="fl">1</span>, <span class="st">"y"</span> <span class="op">=</span> <span class="fl">2</span>, <span class="st">"z"</span> <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></code></pre></div>
<pre><code>##   x   y   z 
## 1.0 2.0 0.5</code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create vector to indicate which variables are integer (eqns 1e -- 1g)</span>
<span class="co">## TRUE means that the variable is an integer</span>
<span class="co">## FALSE means that the variable is not an integer (i.e. continuous)</span>
<span class="va">is_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span> <span class="op">=</span> <span class="cn">TRUE</span>, <span class="st">"y"</span> <span class="op">=</span> <span class="cn">TRUE</span>, <span class="st">"z"</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">is_int</span><span class="op">)</span></code></pre></div>
<pre><code>##    x    y    z 
## TRUE TRUE TRUE</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create vector to indicate the maximum value for each variable (eqns 1e -- 1g)</span>
<span class="co">## create object</span>
<span class="va">col_ub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span> <span class="op">=</span> <span class="fl">10</span>, <span class="st">"y"</span> <span class="op">=</span> <span class="fl">11</span>, <span class="st">"z"</span> <span class="op">=</span> <span class="fl">13</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">col_ub</span><span class="op">)</span></code></pre></div>
<pre><code>##  x  y  z 
## 10 11 13</code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create vector to indicate the minimum value for each variable (eqns 1e -- 1g)</span>
<span class="co">## create object</span>
<span class="va">col_lb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span> <span class="op">=</span> <span class="fl">0</span>, <span class="st">"y"</span> <span class="op">=</span> <span class="fl">0</span>, <span class="st">"z"</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">col_lb</span><span class="op">)</span></code></pre></div>
<pre><code>## x y z 
## 0 0 0</code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create matrix to describe the constraint coefficients (eqns 1b -- 1d)</span>
<span class="co">## this matrix will describe the inequality and equality constraints,</span>
<span class="co">## and for these constraints it will contain the coefficients that</span>
<span class="co">## are on the left hand side of the "&gt;=", "&lt;=", and "=" symbols</span>
<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"(eqn 1b)"</span>, <span class="st">"(eqn 1c)"</span>, <span class="st">"(eqn 1d)"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span></code></pre></div>
<pre><code>##          x y z
## (eqn 1b) 1 1 0
## (eqn 1c) 3 0 4
## (eqn 1d) 1 0 1</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create vector to describe the constraint upper limits (eqns 1b -- 1d)</span>
<span class="co">## specifically, these describe the maximum possible value when</span>
<span class="co">## applying the equations on the left hand side of the "&gt;=", "&lt;=", and "="</span>
<span class="co">## symbols. note that eqn 1c has a maximum possible value of Inf</span>
<span class="co">## because it has a &gt;= inequality</span>
<span class="va">row_ub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"(eqn 1b)"</span> <span class="op">=</span> <span class="fl">1</span>, <span class="st">"(eqn 1c)"</span> <span class="op">=</span> <span class="cn">Inf</span>, <span class="st">"(eqn 1d)"</span> <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">row_ub</span><span class="op">)</span></code></pre></div>
<pre><code>## (eqn 1b) (eqn 1c) (eqn 1d) 
##        1      Inf        8</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create vector to describe the constraint lower limits (eqns 1b -- 1d)</span>
<span class="co">## specifically, these describe the minimum possible value when</span>
<span class="co">## applying the equations on the left hand side of the "&gt;=", "&lt;=", and "="</span>
<span class="co">## symbols. note that eqn 1b has a minimum possible value of -Inf</span>
<span class="co">## because it has a &lt;= inequality</span>
<span class="va">row_lb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"(eqn 1b)"</span> <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>, <span class="st">"(eqn 1c)"</span> <span class="op">=</span> <span class="fl">5</span>, <span class="st">"(eqn 1d)"</span> <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">row_lb</span><span class="op">)</span></code></pre></div>
<pre><code>## (eqn 1b) (eqn 1c) (eqn 1d) 
##     -Inf        5        8</code></pre>
<p>After running this code, we will have generated seven R objects (i.e. <code>obj</code>, <code>is_int</code>, <code>A</code>, <code>col_ub</code>, <code>col_lb</code>, <code>row_ub</code>, and <code>row_lb</code>). If you have previous experience with mixed integer programming and are confused about the <code>row_ub</code> and <code>row_lb</code> objects (and expect to see objects for the constraint senses and right-hand-side values), please see below for details on alternate constraint specifications. Looking at this specification, we can see that each of these objects contains elements that correspond to decision variables or constraints in the problem formulation. We can also see that multiple objects are sometimes used to encode a single equation (e.g. <code>A</code>, <code>row_ub</code>, and <code>row_lb</code> encode eqn 1c). Although we have assigned names (e.g. to values, rows or columns) within these objects to help describe their purpose, these names are actually unnecessary. Indeed, it is the order of these values that is important. For instance, the <span class="math inline">\(x\)</span> decision variable is always in the first position among the <em>R</em> objects that relate to the decision variables (e.g. first index in <code>obj</code> and first column in <code>A</code>).</p>
</div>
<div id="solving-the-problem" class="section level2">
<h2 class="hasAnchor">
<a href="#solving-the-problem" class="anchor"></a>Solving the problem</h2>
<p>After formulating the optimization problem, we can now solve it to optimality. This process is much simpler than encoding the optimization problem:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># solve problem to optimality</span>
<span class="co">## note that we specify `max = TRUE` because our problem is to maximize</span>
<span class="co">## the objective value (per eqn 1a)</span>
<span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cbc_solve.html">cbc_solve</a></span><span class="op">(</span>
  obj <span class="op">=</span> <span class="va">obj</span>, mat <span class="op">=</span> <span class="va">A</span>,
  col_ub <span class="op">=</span> <span class="va">col_ub</span>, col_lb <span class="op">=</span> <span class="va">col_lb</span>,
  row_ub <span class="op">=</span> <span class="va">row_ub</span>, row_lb <span class="op">=</span> <span class="va">row_lb</span>,
  is_integer <span class="op">=</span> <span class="va">is_int</span>, max <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>We can now extract information from the <code>result</code> object. Specifically, we can extract optimal values for the <span class="math inline">\(x\)</span>, <span class="math inline">\(y\)</span>, and <span class="math inline">\(z\)</span> decision variables in the solution. We can also extract the optimal objective value (i.e. the value of eqn 1a given optimal values for the <span class="math inline">\(x\)</span>, <span class="math inline">\(y\)</span>, and <span class="math inline">\(z\)</span> variables). Finally, we can extract information on the status of the solver. This status information is important to verify that the <em>CBC</em> solver did indeed find an optimal solution, and did not end the optimization process for other reasons. For example, if we made a mistake when encoding the problem formulation, the solver might end the optimization process once it realizes that there is no possible solution (i.e. the input problem specification is “infeasible”).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># solution values</span>
<span class="co">## extract values</span>
<span class="va">sol</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/column_solution.html">column_solution</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span>

<span class="co">## set variable names</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">sol</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">sol</span><span class="op">)</span></code></pre></div>
<pre><code>## x y z 
## 0 1 8</code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># extract objective value</span>
<span class="co">## extract value</span>
<span class="va">objv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/objective_value.html">objective_value</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">objv</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># status</span>
<span class="co">## extract information</span>
<span class="va">status</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solution_status.html">solution_status</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span>

<span class="co">## print value</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">status</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "optimal"</code></pre>
<p>The solution status (i.e. optimal) confirms that the optimization process solved the problem to optimality. Thus we can be confident that we now have optimal values for the <span class="math inline">\(x\)</span>, <span class="math inline">\(y\)</span>, and <span class="math inline">\(z\)</span> variables. Although this example completed quickly, the <em>CBC</em> solver will take more time to solve larger and more complex optimization problems (see Mittelmann 2021a and 2021b for benchmarks). In such cases, it is often helpful to customize the optimization process (e.g. specify that you only need near-optimal solutions). For more information on such customizations, please see documentation for the <code><a href="../reference/cbc_solve.html">cbc_solve()</a></code> function. You might also find it useful to try other solvers too (e.g. <a href="https://www.gurobi.com/">Gurobi</a> or <a href="https://www.ibm.com/analytics/cplex-optimizer">IBM CPLEX)</a>.</p>
</div>
<div id="alternate-constraint-specifications" class="section level2">
<h2 class="hasAnchor">
<a href="#alternate-constraint-specifications" class="anchor"></a>Alternate constraint specifications</h2>
<p>If you have previous experience with mixed integer programming solvers, you might expect to see <em>R</em> objects that encode sense and right-hand-side (“rhs”) values for the constraints (instead of <code>row_ub</code> and <code>row_lb</code>). For example, the <a href="https://CRAN.R-project.org/package=Rsymphony"><em>Rsymphony</em> package</a> provides an interface to the <a href="https://coin-or.github.io/SYMPHONY/man-5.6/">SYMPHONY solver</a> (Ralphs and Güzelsoy 2005). Within the <a href="https://CRAN.R-project.org/package=Rsymphony"><em>Rsymphony</em> package</a>, the <a href="https://www.rdocumentation.org/packages/Rsymphony/versions/0.1-29/topics/Rsymphony_solve_LP"><code>Rsymphony_solve_LP</code></a> function – an equivalent to the <code><a href="../reference/cbc_solve.html">cbc_solve()</a></code> function – has <code>dir</code> and <code>rhs</code> parameters for encoding constraints (instead of <code>row_ub</code> and <code>row_lb</code>). For example, following the alternate format (per <a href="https://www.rdocumentation.org/packages/Rsymphony/versions/0.1-29/topics/Rsymphony_solve_LP"><code>Rsymphony_solve_LP</code></a>), we would create the following <em>R</em> objects (instead of <code>row_lb</code> and <code>row_ub</code>):</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create dir object following Rsymphony_solve_LP format (per eqn 1)</span>
<span class="co">## create object</span>
<span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"(eqn 1b)"</span> <span class="op">=</span> <span class="st">"&lt;="</span>, <span class="st">"(eqn 1c)"</span> <span class="op">=</span> <span class="st">"&gt;="</span>, <span class="st">"(eqn 1d)"</span> <span class="op">=</span> <span class="st">"="</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></code></pre></div>
<pre><code>## (eqn 1b) (eqn 1c) (eqn 1d) 
##     "&lt;="     "&gt;="      "="</code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create rhs object following Rsymphony_solve_LP format (per eqn 1)</span>
<span class="co">## create object</span>
<span class="va">rhs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"(eqn 1b)"</span> <span class="op">=</span> <span class="fl">1</span>, <span class="st">"(eqn 1c)"</span> <span class="op">=</span> <span class="fl">5</span>, <span class="st">"(eqn 1d)"</span> <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>

<span class="co">## print object</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">rhs</span><span class="op">)</span></code></pre></div>
<pre><code>## (eqn 1b) (eqn 1c) (eqn 1d) 
##        1        5        8</code></pre>
<p>If you already have your optimization problem encoded in such a format, you can use the following code to convert it into the correct format for <em>rcbc</em> (i.e. create <code>row_ub</code> and <code>row_lb</code> objects based on <code>dir</code> and <code>rhs</code> objects):</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># initialize objects for rcbc</span>
<span class="va">row_ub2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span><span class="op">)</span>
<span class="va">row_lb2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span><span class="op">)</span>

<span class="co"># convert &gt;= constraints</span>
<span class="va">idx</span> <span class="op">&lt;-</span> <span class="va">dir</span> <span class="op">==</span> <span class="st">"&gt;="</span>
<span class="va">row_lb2</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">rhs</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span>
<span class="va">row_ub2</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">Inf</span>

<span class="co"># convert &lt;= constraints</span>
<span class="va">idx</span> <span class="op">&lt;-</span> <span class="va">dir</span> <span class="op">==</span> <span class="st">"&lt;="</span>
<span class="va">row_lb2</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="cn">Inf</span>
<span class="va">row_ub2</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">rhs</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span>

<span class="co"># convert = constraints</span>
<span class="va">idx</span> <span class="op">&lt;-</span> <span class="va">dir</span> <span class="op">==</span> <span class="st">"="</span>
<span class="va">row_lb2</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">rhs</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span>
<span class="va">row_ub2</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">rhs</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span></code></pre></div>
<p>We can compare these new <em>R</em> objects – based on converting the <code>rhs</code> and <code>dir</code> <em>R</em> objects – with the <em>R</em> objects we created earlier to verify that the conversion worked correctly.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># print constraint upper bound objects (note that names are unnecessary)</span>
<span class="co">## print row_ub object we created earlier</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">row_ub</span><span class="op">)</span></code></pre></div>
<pre><code>## (eqn 1b) (eqn 1c) (eqn 1d) 
##        1      Inf        8</code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## print row_ub2 object converted from rhs and dir objects</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">row_ub2</span><span class="op">)</span></code></pre></div>
<pre><code>## [1]   1 Inf   8</code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># print constraint lower bound objects (note that names are unnecessary)</span>
<span class="co">## print row_lb object we created earlier</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">row_lb</span><span class="op">)</span></code></pre></div>
<pre><code>## (eqn 1b) (eqn 1c) (eqn 1d) 
##     -Inf        5        8</code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## print row_lb2 object converted from rhs and dir objects</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">row_lb2</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] -Inf    5    8</code></pre>
<p>Since these new objects (i.e. <code>row_lb2</code> and <code>row_ub2</code>) contain the same values as those we created earlier (i.e. <code>row_lb</code> and <code>row_ub</code>), we can be confident that the conversion code was successful.</p>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>Hopefully, this vignette has provided an informative tutorial on using the <em>rcbc</em> package to solve optimization problems. Although we only covered integer programming problems here, the <em>CBC</em> solver can also generate solutions for linear programming problems and mixed integer linear programming problems. If you need to solve other types of optimization problems (e.g. nonlinear problems), you will need to use other software (see the <a href="https://CRAN.R-project.org/view=Optimization">Optimization and Mathematical Programming CRAN Task View</a> for suggestions). If you encounter any issues or have any questions about using the <em>rcbc</em> package, please create an issue on the <a href="https://github.com/dirkschumacher/rcbc">package’s online code repository</a>. Additionally, if you have questions about the <em>CBC</em> solver specifically (e.g. concerning the effect of certain parameters), please create an issue on the <a href="https://github.com/coin-or/Cbc"><em>CBC</em> online code repository</a>.</p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p><a href="https://doi.org/10.1287/educ.1053.0020">Forrest J and Lougee-Heimer R (2005) CBC User Guide. In Emerging theory, Methods, and Applications (pp. 257–277). INFORMS, Catonsville, MD.</a>.</p>
<p>Mittelmann H (2021a) Benchmarks for optimization software. <a href="http://plato.asu.edu/bench.html" class="uri">http://plato.asu.edu/bench.html</a> [accessed February 2021].</p>
<p>Mittelmann H (2021b) Visualizations of Mittelmann benchmarks. <a href="https://mattmilten.github.io/mittelmann-plots/" class="uri">https://mattmilten.github.io/mittelmann-plots/</a> [accessed March 2021].</p>
<p><a href="https://doi.org/10.1007/0-387-23529-9_5">Ralphs TK and Güzelsoy M (2005) The SYMPHONY callable library for mixed integer programming. In The Next Wave in Computing, Optimization, and Decision Technologies (pp. 61–76). Springer, Boston, MA.</a></p>
<p><a href="https://doi.org/10.1002/9781119606475">Wolsey LA (2020) Integer programming. Second edition. New York: Wiley.</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Dirk Schumacher, Jeroen Ooms, Jeffrey O Hanson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
